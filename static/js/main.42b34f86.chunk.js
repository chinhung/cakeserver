(this.webpackJsonpcakeserver=this.webpackJsonpcakeserver||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(10),i=n.n(a),o=(n(16),n(3)),s=n(9),u=(n(17),n(0)),m="320px";function l(e){return Object(u.jsx)("nav",{className:"w3-sidebar w3-bar-block w3-collapse w3-white w3-animate-left w3-card",style:{zIndex:3,width:m},children:e.children})}function j(e){return Object(u.jsx)("div",{className:"w3-main",style:{marginLeft:m},children:Object(u.jsxs)("div",{className:"w3-container",children:[Object(u.jsx)("br",{}),e.children]})})}var f=function(){return Object(u.jsxs)("a",{href:"https://github.com/chinhung/cakeserver",target:"_blank",rel:"noreferrer",className:"w3-bar-item w3-button",children:[Object(u.jsx)("i",{className:"fa fa-github w3-margin-right"}),"GitHub"]})};var b=function(e){var t=e.onClick;return Object(u.jsxs)("div",{className:"e2e-new-commit w3-bar-item w3-button w3-dark-grey w3-button w3-hover-black w3-left-align",onClick:t,children:["New Commit",Object(u.jsx)("i",{className:"w3-padding fa fa-pencil"})]})};var d=function(){return Object(u.jsxs)("div",{className:"w3-bar-item w3-button w3-border-bottom w3-large",children:[Object(u.jsx)("h3",{children:"Cake Server"}),Object(u.jsx)("h5",{style:{color:"grey"},children:"Splits your task into peices of cake!"})]})};var g=function(e){var t=e.commits,n=e.onSelect;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"w3-bar-item w3-button",children:[Object(u.jsx)("i",{className:"fa fa-inbox w3-margin-right"}),"Commits",Object(u.jsx)("i",{className:"fa fa-caret-down w3-margin-left"})]}),Object(u.jsx)("div",{className:"w3-animate-left",children:t.map((function(e){return Object(u.jsx)("div",{className:"w3-bar-item w3-button w3-border-bottom test w3-hover-light-grey",onClick:function(){return n(Object(o.a)({},e))},children:Object(u.jsxs)("div",{className:"w3-container",children:[Object(u.jsx)("span",{className:"e2e-commit-message w3-opacity w3-large",children:e.message}),Object(u.jsx)("p",{className:"e2e-commit-note",children:e.note})]})},e.id)}))})]})},h=n(11),w=n.n(h),O="Copy Commit Message",v="copyCommitMessageBtn",x="#".concat(v),p="commitMessageText",C="#".concat(p);function N(e){var t=e.operations;return Object(r.useEffect)((function(){var e=new w.a(x);e.on("success",(function(e){console.info("Action:",e.action),console.info("Text:",e.text),console.info("Trigger:",e.trigger),e.clearSelection()})),e.on("error",(function(e){console.error("Action:",e.action),console.error("Trigger:",e.trigger)}))}),[]),t.map((function(e,t){return e.name===O?Object(u.jsx)("button",{id:v,"data-clipboard-target":C,className:e.className,onClick:e.operate,children:e.name},t):Object(u.jsx)("button",{className:e.className,onClick:e.operate,children:e.name},t)}))}var y=function(e){return function(t){var n=t.saveCommit,r=t.copyCommitMessage,c=t.deleteCommit,a=t.redoCommit;return function(t){return e(t)?[{name:"Save",className:"w3-button w3-light-grey e2e-save",operate:function(){return n(t)}}]:[{name:"Save",className:"w3-button w3-light-grey e2e-save",operate:function(){return n(t)}},{name:"Redo",className:"w3-button w3-light-grey e2e-redo",operate:function(){return a(t)}},{name:O,className:"w3-button w3-light-grey e2e-copy-commit-message",operate:function(){return r(t.message)}},{name:"Delete",className:"w3-button w3-light-grey e2e-delete",operate:function(){return c(t)}}]}}};var k=function(e){var t=e.message,n=e.onChange;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h4",{children:"Commit Message"}),Object(u.jsx)("input",{id:p,className:"e2e-message",type:"text",value:t,onChange:function(e){return n(e.target.value)}})]})};var S=function(e){var t=e.note,n=e.onChange;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h4",{children:"Note"}),Object(u.jsx)("textarea",{id:"w3review",className:"e2e-note",name:"w3review",rows:"4",cols:"50",value:t,onChange:function(e){return n(e.target.value)}})]})},M=function(e){return function(){return e.loadCommits()}},F=n(21).a,I=function(){return{id:F(),message:"",note:""}},J=function(e){return function(t){return 0===e.filter((function(e){return e.id===t.id})).length}},T=n(2),E=n(6),P=n(7),A=function(){return JSON.parse(localStorage.getItem("cakeserver.commits")||"[]")},B=function(e){localStorage.setItem("cakeserver.commits",JSON.stringify(e))},z=function(){function e(){Object(E.a)(this,e)}return Object(P.a)(e,[{key:"loadCommits",value:function(){var e=A();return new Promise((function(t,n){t(e)}))}},{key:"saveCommit",value:function(e){var t=A(),n=t.filter((function(t){return t.id===e.id}));return t=0===n.length?[].concat(Object(T.a)(t),[e]):Object(T.a)(t.map((function(t){return t.id===e.id?{id:t.id,message:e.message,note:e.note}:t}))),B(t),new Promise((function(e,t){e()}))}},{key:"deleteCommit",value:function(e){var t=A();return t=Object(T.a)(t.filter((function(t){return t.id!==e.id}))),B(t),new Promise((function(e,t){e()}))}}]),e}();var D=function(e){var t=e.dataSource,n=Object(r.useState)([]),c=Object(s.a)(n,2),a=c[0],i=c[1],m=Object(r.useState)(I()),h=Object(s.a)(m,2),w=h[0],O=h[1],v=function(){M(t)().then((function(e){return i(e)}))};Object(r.useEffect)((function(){M(t)().then((function(e){return i(e)}))}),[]);var x={saveCommit:function(e){(function(e){return function(t){return e.saveCommit(t)}})(t)(e).then((function(){v()}))},redoCommit:function(e){O(Object(o.a)({},a.filter((function(t){return t.id===e.id}))[0]))},copyCommitMessage:function(e){console.log("copy: "+e)},deleteCommit:function(e){(function(e){return function(t){return e.deleteCommit(t)}})(t)(e).then((function(){v(),O(I())}))}};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(l,{children:[Object(u.jsx)(d,{}),Object(u.jsx)(b,{onClick:function(){O(I())}}),Object(u.jsx)(g,{commits:a,onSelect:function(e){O(e)}}),Object(u.jsx)(f,{})]}),Object(u.jsxs)(j,{children:[Object(u.jsx)(k,{message:w.message,onChange:function(e){O(Object(o.a)(Object(o.a)({},w),{},{message:e}))}}),Object(u.jsx)(S,{note:w.note,onChange:function(e){O(Object(o.a)(Object(o.a)({},w),{},{note:e}))}}),Object(u.jsx)("hr",{}),Object(u.jsx)(N,{operations:y(J(a))(x)(w)})]})]})};i.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(D,{dataSource:new z})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.42b34f86.chunk.js.map